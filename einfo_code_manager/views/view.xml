<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record model="ir.actions.act_window" id="action_menu_code_manager">
        <field name="name">编号类型</field>
        <field name="res_model">einfo.code.rule</field>
        <field name="view_mode">tree,form</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
            Create a new einfo.code.rule
            </p>
        </field>
    </record>

    <record model="ir.ui.view" id="account_einfo_code_rule_tree">
        <field name="name">编号类型</field>
        <field name="model">einfo.code.rule</field>
        <field name="arch" type="xml">
            <tree string="编号类型">
                <field name="name"/>
                <!-- <field name="description"/> -->
            </tree>
        </field>
    </record>
    <record model="ir.ui.view" id="view_einfo_code_rule_form">
        <field name="name">编号类型 </field>
        <field name="model">einfo.code.rule</field>
        <field name="arch" type="xml">
            <form string="Sequences">
                <sheet>
                    <group>
                        <group>
                            <field name="name"/>
                        </group>
                    </group>
                    <group>
                        <field name="tem_generate_code" widget="code_generate_array"/>
                    </group>
                    <notebook>
                        <page string="规则行">
                            <field name="einfo_code_rule_line_ids">
                                <tree string="规则行">
                                    <field name="name"/>
                                    <!-- <field name="einfo_code_rule_id"/> -->
                                </tree>
                            </field>
                            <h4>生成编号</h4>
                            <field name="generate_code_line_ids">
                                <tree string="生成编号" default_order='create_date desc'>
                                    <field name="name"/>
                                    <field name="description"/>
                                    <field name="create_date" string="创建时间"/>
                                    <field name="create_uid" string="创建人"/>
                                </tree>
                            </field>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>
    <menuitem name="编号管理" id="menu_code_parent"  parent="base.menu_administration" sequence="50" />
    <menuitem name="编号管理" id="menu_code_manager" parent="menu_code_parent" action="action_menu_code_manager" sequence="1" />

    <record model="ir.ui.view" id="view_einfo_code_rule_line_form">
        <field name="name">einfo.code.rule.line </field>
        <field name="model">einfo.code.rule.line</field>
        <field name="arch" type="xml">
            <form string="规则行">
                <sheet>
                    <group>
                        <group>
                            <field name="name"/>
                            <field name="ttype"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="详细内容">
                            <field name="rule_context_ids" attrs="{'invisible': [('ttype', 'in', ['sequence','char'])]}">
                                <tree string="详细内容" editable="bottom">
                                    <field name="name"/>
                                    <field name="value"/>
                                </tree>
                            </field>
                            <field string="序号" name="ir_sequence_id" attrs="{'invisible': [('ttype', 'in', ['select','char'])]}"/>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

<record model="ir.actions.act_window" id="action_generate_code_line">
        <field name="name">generate.code.line</field>
        <field name="res_model">generate.code.line</field>
        <field name="view_mode">tree,form</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
            Create a new generate.code.line
            </p>
        </field>
    </record>

    <record model="ir.ui.view" id="account_generate_code_line_tree">
        <field name="name">generate.code.line.tree</field>
        <field name="model">generate.code.line</field>
        <field name="arch" type="xml">
            <tree string="编号">
                <field name="name"/>
                <field name="description"/>
                <field name="create_date" string="创建时间"/>
                <field name="create_uid" string="创建人"/>
            </tree>
        </field>
    </record>
    <record model="ir.ui.view" id="view_generate_code_line_form">
        <field name="name">generate.code.line </field>
        <field name="model">generate.code.line</field>
        <field name="arch" type="xml">
            <form string="编号">
                <sheet>
                    <group>
                        <group>
                            <field name="name"/>
                            <field name="description"/>
                        </group>
                    </group>
                    <group>
                         <field name="create_date" string="创建时间"/>
                        <field name="create_uid" string="创建人"/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>
    <menuitem name="编号" id="menu_generate_code" parent="menu_code_parent" action="action_generate_code_line" sequence="2" />


    <!-- <record id="action_einfo_code_rule_wizard" model="ir.actions.act_window">
        <field name="name">确认生成编号吗?</field>
        <field name="res_model">einfo.code.rule.wizard</field>
        <field name="view_mode">form</field>
        <field name="target">new</field>
    </record> -->
    <record model="ir.ui.view" id="view_einfo_code_rule_wizard_form">
        <field name="name">确认生成编号吗</field>
        <field name="model">einfo.code.rule.wizard</field>
        <field name="arch" type="xml">
            <form string="编号">
                <group>
                    <group>
                        <field name="name"/>
                        <field name="description"/>
                    </group>
                </group>
                <span>生成后的编号需要手动刷新一下界面，才出现</span>
                 <footer>
                        <button name="comfirm" type="object"
                                string="确认" class="oe_highlight"/>
                        /
                        <button special="cancel" string="取消"/>
                    </footer>
            </form>
        </field>
    </record>
</odoo>
